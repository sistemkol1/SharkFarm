<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SharkFarm</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>

/* ‚îÄ‚îÄ Reset & Root ‚îÄ‚îÄ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:         #07091a;
  --bg2:        #0e1525;
  --bg3:        #162035;
  --border:     rgba(255,255,255,0.08);
  --accent:     #e63946;
  --accent2:    #ff6b35;
  --accent3:    #ff1744;
  --green:      #22c55e;
  --red:        #e63946;
  --gold:       #fbbf24;
  --cyan:       #00e5ff;
  --purple:     #8b5cf6;
  --text:       #f1f5f9;
  --text2:      #94a3b8;
  --text3:      #475569;
  --radius:     14px;
  --radius-sm:  8px;
  --transition: 0.2s cubic-bezier(0.4,0,0.2,1);
}

html, body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  min-height: 100vh;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

/* ‚îÄ‚îÄ Background grid (–æ—Ç webapp) ‚îÄ‚îÄ */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(rgba(230,57,70,0.015) 1px, transparent 1px),
    linear-gradient(90deg, rgba(230,57,70,0.015) 1px, transparent 1px);
  background-size: 52px 52px;
  pointer-events: none;
  z-index: 0;
  animation: gridDrift 35s linear infinite;
  mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 40%, transparent 100%);
  -webkit-mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 40%, transparent 100%);
}
@keyframes gridDrift {
  0%   { background-position: 0 0; }
  100% { background-position: 52px 52px; }
}

/* Aurora sweep ‚Äî –∫—Ä–∞—Å–Ω–∞—è —Ç–µ–º–∞ */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 110% 60% at 15% 10%, rgba(230,57,70,0.07) 0%, transparent 55%),
    radial-gradient(ellipse 80% 50% at 85% 85%, rgba(255,107,53,0.06) 0%, transparent 55%),
    radial-gradient(ellipse 60% 40% at 50% 50%, rgba(230,57,70,0.03) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
  animation: auroraPulse 22s ease-in-out infinite alternate;
}
@keyframes auroraPulse {
  0%   { opacity: 0.7; transform: scale(1)   translateY(0); }
  50%  { opacity: 1;   transform: scale(1.04) translateY(-12px); }
  100% { opacity: 0.6; transform: scale(0.97) translateY(8px); }
}

/* ‚îÄ‚îÄ –û—Ä–±—ã (–æ—Ç webapp) ‚îÄ‚îÄ */
.bg-orbs { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
.bg-orb { position: absolute; border-radius: 50%; filter: blur(70px); will-change: transform,opacity; }
.bg-orb-1 {
  width: 60vw; height: 60vw;
  background: radial-gradient(circle, rgba(230,57,70,0.09) 0%, transparent 70%);
  top: -15%; left: -15%;
  animation: orbMove1 18s ease-in-out infinite alternate;
}
.bg-orb-2 {
  width: 55vw; height: 55vw;
  background: radial-gradient(circle, rgba(255,107,53,0.08) 0%, transparent 70%);
  top: 0%; right: -20%;
  animation: orbMove2 22s ease-in-out infinite alternate;
}
.bg-orb-3 {
  width: 45vw; height: 45vw;
  background: radial-gradient(circle, rgba(139,92,246,0.06) 0%, transparent 70%);
  bottom: 5%; right: 0%;
  animation: orbMove3 25s ease-in-out infinite alternate;
}
.bg-orb-4 {
  width: 40vw; height: 40vw;
  background: radial-gradient(circle, rgba(230,57,70,0.05) 0%, transparent 70%);
  bottom: -10%; left: 10%;
  animation: orbMove4 28s ease-in-out infinite alternate;
}
@keyframes orbMove1 {
  0%   { transform: translate(0,0) scale(1); opacity: 0.8; }
  50%  { transform: translate(8vw,6vh) scale(1.15); opacity: 1; }
  100% { transform: translate(4vw,12vh) scale(0.95); opacity: 0.7; }
}
@keyframes orbMove2 {
  0%   { transform: translate(0,0) scale(1); opacity: 0.7; }
  50%  { transform: translate(-6vw,8vh) scale(1.2); opacity: 1; }
  100% { transform: translate(-10vw,3vh) scale(0.9); opacity: 0.8; }
}
@keyframes orbMove3 {
  0%   { transform: translate(0,0) scale(1); opacity: 0.7; }
  50%  { transform: translate(-7vw,-5vh) scale(1.1); opacity: 0.9; }
  100% { transform: translate(-3vw,-10vh) scale(1.05); opacity: 1; }
}
@keyframes orbMove4 {
  0%   { transform: translate(0,0) scale(1); opacity: 0.6; }
  50%  { transform: translate(9vw,-7vh) scale(1.15); opacity: 0.9; }
  100% { transform: translate(5vw,-12vh) scale(0.95); opacity: 0.7; }
}

/* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
#app { position: relative; z-index: 1; padding-bottom: 80px; }

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.header {
  padding: 16px 16px 14px;
  background: linear-gradient(180deg, rgba(230,57,70,0.1) 0%, rgba(255,107,53,0.04) 50%, transparent 100%);
  border-bottom: 1px solid rgba(230,57,70,0.15);
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
}
.header-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
}

/* ‚îÄ‚îÄ –õ–û–ì–û–¢–ò–ü —Å–æ Shark + –ø–µ—Ä–µ–ª–∏–≤–æ–º ‚îÄ‚îÄ */
.logo {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ª–æ–≥–æ—Ç–∏–ø–∞ */
.logo-icon-wrap {
  position: relative;
  width: 38px; height: 38px;
  flex-shrink: 0;
}
/* –í—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–µ—Ä–µ–ª–∏–≤–Ω–æ–π ring */
.logo-ring {
  position: absolute;
  inset: -2px;
  border-radius: 12px;
  background: conic-gradient(
    from 0deg,
    var(--accent),
    var(--accent2),
    #ff1744,
    var(--accent2),
    var(--accent),
    var(--accent2),
    var(--accent)
  );
  animation: logoRingSpin 3s linear infinite;
  z-index: 0;
}
@keyframes logoRingSpin {
  to { transform: rotate(360deg); }
}
/* –¢—ë–º–Ω–∞—è –∑–∞–ª–∏–≤–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª—å—Ü–∞ */
.logo-ring::after {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 10px;
  background: var(--bg2);
  z-index: 1;
}
.logo-icon {
  position: relative;
  z-index: 2;
  width: 38px; height: 38px;
  border-radius: 11px;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px;
}

/* –¢–µ–∫—Å—Ç –ª–æ–≥–æ—Ç–∏–ø–∞ —Å –ø–µ—Ä–µ–ª–∏–≤–æ–º */
.logo-text {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700;
  font-size: 21px;
  letter-spacing: 1.5px;
  background: linear-gradient(135deg,
    #fff 0%,
    var(--accent) 35%,
    var(--accent2) 65%,
    #fff 100%
  );
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: logoTextFlow 5s ease infinite;
}
@keyframes logoTextFlow {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.logo-sub {
  font-size: 10px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--text3);
  font-family: 'Inter', sans-serif;
  font-weight: 500;
  margin-top: 1px;
}

/* –°—Ç–∞—Ç—É—Å —á–∏–ø */
.status-chip {
  display: flex;
  align-items: center;
  gap: 5px;
  background: rgba(34,197,94,0.1);
  border: 1px solid rgba(34,197,94,0.3);
  border-radius: 22px;
  padding: 5px 11px;
  font-size: 12px;
  font-weight: 600;
  color: var(--green);
  cursor: pointer;
  transition: var(--transition);
}
.status-chip:active { transform: scale(0.95); }
.status-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--green);
  box-shadow: 0 0 8px var(--green);
  animation: livePulse 2s ease infinite;
}
@keyframes livePulse {
  0%,100% { opacity:1; transform: scale(1); }
  50%     { opacity:0.4; transform: scale(0.7); }
}

/* ‚îÄ‚îÄ Nav tabs (–æ—Ç webapp, –∫—Ä–∞—Å–Ω–∞—è —Ç–µ–º–∞) ‚îÄ‚îÄ */
.nav-tabs {
  display: flex;
  gap: 4px;
  background: rgba(255,255,255,0.04);
  border-radius: 10px;
  padding: 3px;
}
.nav-tab {
  flex: 1;
  padding: 7px 4px;
  border-radius: 8px;
  text-align: center;
  font-size: 11px;
  font-weight: 500;
  color: var(--text2);
  cursor: pointer;
  transition: var(--transition);
  display: flex; flex-direction: column; align-items: center; gap: 2px;
  border: none; background: none;
  -webkit-tap-highlight-color: transparent;
}
.nav-tab .tab-icon { font-size: 16px; }
.nav-tab.active {
  background: linear-gradient(135deg, rgba(230,57,70,0.22), rgba(255,107,53,0.18));
  color: var(--accent);
  box-shadow: 0 0 16px rgba(230,57,70,0.25), inset 0 1px 0 rgba(230,57,70,0.15);
}

/* ‚îÄ‚îÄ Pages ‚îÄ‚îÄ */
.page { display: none; padding: 16px; animation: fadeUp 0.3s ease; }
.page.active { display: block; }
@keyframes fadeUp {
  from { opacity:0; transform: translateY(12px); }
  to   { opacity:1; transform: translateY(0); }
}

/* ‚îÄ‚îÄ Section title ‚îÄ‚îÄ */
.section-title {
  font-family: 'Rajdhani', sans-serif;
  font-size: 24px;
  font-weight: 700;
  letter-spacing: 0.5px;
  margin-bottom: 3px;
  background: linear-gradient(135deg, #fff 30%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.section-sub { font-size: 13px; color: var(--text2); margin-bottom: 18px; }

/* ‚îÄ‚îÄ Stat Cards (–ø–µ—Ä–µ–ª–∏–≤–Ω—ã–µ) ‚îÄ‚îÄ */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-bottom: 18px;
}

.stat-card {
  position: relative;
  border-radius: var(--radius);
  overflow: hidden;
  padding: 14px;
  cursor: pointer;
  transition: transform 0.2s ease;
}
.stat-card:active { transform: scale(0.97); }

/* –ü–µ—Ä–µ–ª–∏–≤–Ω–∞—è —Ä–∞–º–∫–∞ (–∫–∞–∫ –≤ webapp –∫–∞—Ä—Ç–æ—á–∫–∞—Ö) */
.stat-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--radius);
  padding: 1px;
  background: linear-gradient(135deg, var(--accent), var(--accent2), rgba(255,255,255,0.1), var(--accent));
  background-size: 300% 300%;
  animation: cardShimmer 4s linear infinite;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}
@keyframes cardShimmer {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.stat-card.s-red {
  background: linear-gradient(160deg, rgba(230,57,70,0.2) 0%, rgba(14,21,37,0.97) 40%, rgba(230,57,70,0.1) 100%);
  box-shadow: 0 2px 20px rgba(230,57,70,0.15), inset 0 1px 0 rgba(230,57,70,0.2);
  animation: glowRed 4s ease infinite;
}
.stat-card.s-green {
  background: linear-gradient(160deg, rgba(34,197,94,0.2) 0%, rgba(14,21,37,0.97) 40%, rgba(34,197,94,0.1) 100%);
  box-shadow: 0 2px 20px rgba(34,197,94,0.15), inset 0 1px 0 rgba(34,197,94,0.2);
  animation: glowGreen 4s ease infinite;
}
.stat-card.s-gold {
  background: linear-gradient(160deg, rgba(251,191,36,0.2) 0%, rgba(14,21,37,0.97) 40%, rgba(251,191,36,0.1) 100%);
  box-shadow: 0 2px 20px rgba(251,191,36,0.15), inset 0 1px 0 rgba(251,191,36,0.2);
  animation: glowGold 4s ease infinite;
}
.stat-card.s-blue {
  background: linear-gradient(160deg, rgba(0,229,255,0.15) 0%, rgba(14,21,37,0.97) 40%, rgba(0,229,255,0.08) 100%);
  box-shadow: 0 2px 20px rgba(0,229,255,0.12), inset 0 1px 0 rgba(0,229,255,0.15);
  animation: glowBlue 4s ease infinite;
}

@keyframes glowRed {
  0%,100% { box-shadow: 0 2px 20px rgba(230,57,70,0.15), inset 0 1px 0 rgba(230,57,70,0.2); }
  50%     { box-shadow: 0 4px 36px rgba(230,57,70,0.4), inset 0 1px 0 rgba(230,57,70,0.35); }
}
@keyframes glowGreen {
  0%,100% { box-shadow: 0 2px 20px rgba(34,197,94,0.15), inset 0 1px 0 rgba(34,197,94,0.2); }
  50%     { box-shadow: 0 4px 36px rgba(34,197,94,0.4), inset 0 1px 0 rgba(34,197,94,0.35); }
}
@keyframes glowGold {
  0%,100% { box-shadow: 0 2px 20px rgba(251,191,36,0.15), inset 0 1px 0 rgba(251,191,36,0.2); }
  50%     { box-shadow: 0 4px 36px rgba(251,191,36,0.4), inset 0 1px 0 rgba(251,191,36,0.35); }
}
@keyframes glowBlue {
  0%,100% { box-shadow: 0 2px 20px rgba(0,229,255,0.12), inset 0 1px 0 rgba(0,229,255,0.15); }
  50%     { box-shadow: 0 4px 36px rgba(0,229,255,0.3), inset 0 1px 0 rgba(0,229,255,0.3); }
}

/* –ë–ª–∏–∫-–ø–æ–ª–æ—Å–∫–∞ —Å–≤–µ—Ä—Ö—É –∫–∞—Ä—Ç–æ—á–∫–∏ (–∫–∞–∫ –≤ webapp) */
.stat-card::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg,
    transparent 0%,
    var(--card-accent, var(--accent)) 40%,
    var(--card-accent, var(--accent)) 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: cardShimmer 3s linear infinite;
}
.s-red   { --card-accent: var(--accent); }
.s-green { --card-accent: var(--green); }
.s-gold  { --card-accent: var(--gold); }
.s-blue  { --card-accent: var(--cyan); }

.stat-label {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--text3);
  margin-bottom: 6px;
}
.stat-val {
  font-family: 'Rajdhani', sans-serif;
  font-size: 30px;
  font-weight: 700;
  line-height: 1;
  margin-bottom: 4px;
}
.s-red   .stat-val { color: var(--accent); }
.s-green .stat-val { color: var(--green); }
.s-gold  .stat-val { color: var(--gold); }
.s-blue  .stat-val { color: var(--cyan); }
.stat-sub { font-size: 11px; color: var(--text3); }

/* ‚îÄ‚îÄ Bot Cards ‚îÄ‚îÄ */
.bots-list { display: flex; flex-direction: column; gap: 10px; }

.bot-card {
  border-radius: var(--radius);
  overflow: hidden;
  cursor: pointer;
  position: relative;
  transition: transform 0.2s ease;
  animation: cardEntrance 0.4s cubic-bezier(0.4,0,0.2,1) both;
}
.bot-card:nth-child(1) { animation-delay: 0s; }
.bot-card:nth-child(2) { animation-delay: 0.06s; }
.bot-card:nth-child(3) { animation-delay: 0.12s; }
.bot-card:nth-child(4) { animation-delay: 0.18s; }
@keyframes cardEntrance {
  from { opacity:0; transform: translateY(16px); }
  to   { opacity:1; transform: translateY(0); }
}
.bot-card:active { transform: scale(0.985); }

/* –°–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—Ç–æ–≤ */
.bot-card.bc-online {
  background: linear-gradient(160deg, rgba(34,197,94,0.2) 0%, rgba(14,21,37,0.97) 35%, rgba(34,197,94,0.1) 100%);
  border: 1px solid rgba(34,197,94,0.45);
  box-shadow: 0 2px 20px rgba(34,197,94,0.12), inset 0 1px 0 rgba(34,197,94,0.2);
  animation: glowGreen 4s ease infinite;
}
.bot-card.bc-farming {
  background: linear-gradient(160deg, rgba(0,229,255,0.18) 0%, rgba(14,21,37,0.97) 35%, rgba(0,229,255,0.08) 100%);
  border: 1px solid rgba(0,229,255,0.45);
  box-shadow: 0 2px 20px rgba(0,229,255,0.12), inset 0 1px 0 rgba(0,229,255,0.2);
  animation: glowBlue 4s ease infinite;
}
.bot-card.bc-idle {
  background: linear-gradient(160deg, rgba(251,191,36,0.15) 0%, rgba(14,21,37,0.97) 35%, rgba(251,191,36,0.08) 100%);
  border: 1px solid rgba(251,191,36,0.3);
  animation: glowGold 4s ease infinite;
}
.bot-card.bc-offline {
  background: linear-gradient(160deg, rgba(71,85,105,0.3) 0%, rgba(14,21,37,0.97) 35%, rgba(71,85,105,0.15) 100%);
  border: 1px solid rgba(71,85,105,0.4);
}

/* –ë–ª–∏–∫-–ø–æ–ª–æ—Å–∫–∞ —Å–≤–µ—Ä—Ö—É */
.bot-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent 0%, var(--bot-glow, var(--accent)) 40%, var(--bot-glow, var(--accent)) 60%, transparent 100%);
  background-size: 200% 100%;
  animation: cardShimmer 3s linear infinite;
}
.bc-online  { --bot-glow: var(--green); }
.bc-farming { --bot-glow: var(--cyan); }
.bc-idle    { --bot-glow: var(--gold); }
.bc-offline { --bot-glow: rgba(71,85,105,0.5); }

.bot-body {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
}

/* –ê–≤–∞—Ç–∞—Ä –±–æ—Ç–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π ring (–∫–∞–∫ –≤ webapp) */
.bot-avatar {
  width: 48px; height: 48px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px;
  flex-shrink: 0;
  position: relative;
  overflow: visible;
}
.bot-avatar-inner {
  width: 44px; height: 44px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px;
  background: linear-gradient(135deg, var(--bg2), var(--bg3));
  z-index: 1;
  position: relative;
  overflow: hidden;
}
.bot-avatar-ring {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  padding: 2px;
  background: conic-gradient(from 0deg, var(--ring-c1, var(--accent)), var(--ring-c2, var(--accent2)), var(--ring-c1, var(--accent)));
  animation: logoRingSpin 2.5s linear infinite;
}
.bot-avatar-ring::after {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  background: var(--bg2);
}
.bc-online  .bot-avatar-ring { --ring-c1: var(--green); --ring-c2: #86efac; }
.bc-farming .bot-avatar-ring { --ring-c1: var(--cyan); --ring-c2: #7dd3fc; }
.bc-idle    .bot-avatar-ring { --ring-c1: var(--gold); --ring-c2: #fde68a; }
.bc-offline .bot-avatar-ring { display: none; }
.bc-offline .bot-avatar-inner { border: 2px solid rgba(71,85,105,0.5); }

.bot-info { flex: 1; min-width: 0; }
.bot-name {
  font-family: 'Rajdhani', sans-serif;
  font-size: 17px;
  font-weight: 700;
  margin-bottom: 2px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.bc-online  .bot-name { color: #86efac; }
.bc-farming .bot-name { color: #a5f3fc; }
.bc-idle    .bot-name { color: #fde68a; }
.bc-offline .bot-name { color: var(--text2); }

.bot-detail { font-size: 12px; color: var(--text2); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.bot-status-badge {
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  white-space: nowrap;
  letter-spacing: 0.3px;
}
.bc-online  .bot-status-badge { background: rgba(34,197,94,0.18); color: #4ade80; border: 1px solid rgba(34,197,94,0.45); }
.bc-farming .bot-status-badge { background: rgba(0,229,255,0.18); color: var(--cyan); border: 1px solid rgba(0,229,255,0.45); }
.bc-idle    .bot-status-badge { background: rgba(251,191,36,0.18); color: var(--gold); border: 1px solid rgba(251,191,36,0.45); }
.bc-offline .bot-status-badge { background: rgba(71,85,105,0.2); color: var(--text3); border: 1px solid rgba(71,85,105,0.3); }

/* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Ñ–∞—Ä–º–∏–Ω–≥–∞ */
.bot-progress { padding: 0 14px 12px; }
.bot-progress-label { font-size: 11px; color: var(--text3); margin-bottom: 5px; display: flex; justify-content: space-between; }
.progress-track { height: 4px; background: rgba(255,255,255,0.07); border-radius: 2px; overflow: hidden; }
.progress-fill {
  height: 100%;
  border-radius: 2px;
  background: linear-gradient(90deg, var(--fill-c1, var(--accent)), var(--fill-c2, var(--accent2)));
  background-size: 200% 100%;
  animation: cardShimmer 2.5s linear infinite;
  box-shadow: 0 0 8px var(--fill-glow, rgba(230,57,70,0.5));
  transition: width 0.5s ease;
}
.bc-farming .progress-fill { --fill-c1: var(--cyan); --fill-c2: #7dd3fc; --fill-glow: rgba(0,229,255,0.4); }

/* –≠–∫—à–µ–Ω-–∫–Ω–æ–ø–∫–∏ –±–æ—Ç–∞ */
.bot-actions {
  display: flex;
  gap: 6px;
  padding: 0 14px 14px;
}
.btn-bot-action {
  flex: 1;
  height: 34px;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: var(--transition);
  -webkit-tap-highlight-color: transparent;
  display: flex; align-items: center; justify-content: center; gap: 5px;
}
.btn-bot-action:active { transform: scale(0.93); }
.btn-start {
  background: linear-gradient(135deg, #16a34a, #15803d);
  color: #fff;
  box-shadow: 0 2px 12px rgba(34,197,94,0.35);
}
.btn-stop {
  background: linear-gradient(135deg, rgba(230,57,70,0.2), rgba(230,57,70,0.15));
  color: var(--accent);
  border: 1px solid rgba(230,57,70,0.3);
}
.btn-stop:active { background: linear-gradient(135deg, #e11d48, #9f1239); color:#fff; }
.btn-delete {
  width: 34px; flex: none;
  background: rgba(255,255,255,0.05);
  color: var(--text3);
  border: 1px solid rgba(255,255,255,0.08);
}
.btn-delete:active { background: rgba(230,57,70,0.2); color: var(--accent); }

/* ‚îÄ‚îÄ Card (universal) ‚îÄ‚îÄ */
.card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 14px;
  overflow: hidden;
  position: relative;
}
.card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(230,57,70,0.3), transparent);
}
.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}
.card-title {
  font-family: 'Rajdhani', sans-serif;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 0.3px;
  display: flex; align-items: center; gap: 7px;
}
.card-body { padding: 14px; }

/* ‚îÄ‚îÄ Log ‚îÄ‚îÄ */
.log-area {
  background: rgba(0,0,0,0.35);
  border-radius: var(--radius-sm);
  padding: 12px;
  font-family: 'Courier New', monospace;
  font-size: 11px;
  line-height: 1.8;
  height: 240px;
  overflow-y: auto;
  border: 1px solid rgba(255,255,255,0.06);
}
.log-area::-webkit-scrollbar { width: 4px; }
.log-area::-webkit-scrollbar-track { background: transparent; }
.log-area::-webkit-scrollbar-thumb { background: rgba(230,57,70,0.3); border-radius: 2px; }
.log-line { padding: 1px 0; }
.log-time { color: var(--text3); }
.log-info { color: var(--cyan); }
.log-ok   { color: var(--green); }
.log-warn { color: var(--gold); }
.log-err  { color: var(--accent); }

/* ‚îÄ‚îÄ Command bar ‚îÄ‚îÄ */
.cmd-bar { display: flex; gap: 8px; margin-bottom: 12px; }
.cmd-input {
  flex: 1;
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(230,57,70,0.25);
  border-radius: var(--radius-sm);
  padding: 10px 13px;
  color: var(--text);
  font-size: 13px;
  font-family: 'Courier New', monospace;
  outline: none;
  transition: border-color 0.2s;
}
.cmd-input::placeholder { color: var(--text3); }
.cmd-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(230,57,70,0.12); }

/* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
.btn {
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  border: none;
  transition: var(--transition);
  display: flex; align-items: center; justify-content: center; gap: 5px;
  -webkit-tap-highlight-color: transparent;
}
.btn:active { transform: scale(0.93); }

.btn-primary {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff;
  padding: 9px 18px;
  box-shadow: 0 2px 16px rgba(230,57,70,0.35);
}
.btn-primary:active { opacity: 0.9; }

.btn-ghost {
  background: rgba(255,255,255,0.05);
  color: var(--text2);
  border: 1px solid rgba(255,255,255,0.1);
  padding: 8px 14px;
}
.btn-ghost:active { background: rgba(255,255,255,0.1); color: var(--text); }

.btn-danger {
  background: rgba(230,57,70,0.1);
  color: var(--accent);
  border: 1px solid rgba(230,57,70,0.3);
  padding: 8px 14px;
}
.btn-danger:active { background: linear-gradient(135deg, #e11d48, #9f1239); color: #fff; }

/* Quick cmd pills */
.cmd-pills { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
.cmd-pill {
  padding: 4px 11px;
  border-radius: 20px;
  background: rgba(230,57,70,0.1);
  border: 1px solid rgba(230,57,70,0.25);
  color: rgba(255,150,150,0.85);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  font-family: 'Courier New', monospace;
  transition: var(--transition);
  -webkit-tap-highlight-color: transparent;
}
.cmd-pill:active { background: rgba(230,57,70,0.25); transform: scale(0.93); }

/* ‚îÄ‚îÄ Profile hero (–æ—Ç webapp) ‚îÄ‚îÄ */
.profile-hero {
  border-radius: var(--radius);
  padding: 20px;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 16px;
  position: relative;
  overflow: hidden;
  background: linear-gradient(270deg,
    rgba(230,57,70,0.14),
    rgba(255,107,53,0.16),
    rgba(230,57,70,0.10),
    rgba(255,107,53,0.14),
    rgba(230,57,70,0.14)
  );
  background-size: 300% 300%;
  animation: heroShimmer 7s ease infinite;
  border: 1px solid rgba(230,57,70,0.3);
}
@keyframes heroShimmer {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.profile-hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, transparent 25%, rgba(255,255,255,0.04) 50%, transparent 75%);
  background-size: 200% 100%;
  animation: heroShimmer 4s linear infinite;
  pointer-events: none;
}

/* –ë–æ–ª—å—à–æ–π –∞–≤–∞—Ç–∞—Ä —Å –∫–æ–ª—å—Ü–æ–º */
.hero-avatar {
  width: 60px; height: 60px;
  border-radius: 50%;
  position: relative;
  flex-shrink: 0;
}
.hero-avatar-inner {
  width: 56px; height: 56px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 28px;
  background: linear-gradient(135deg, var(--accent), var(--accent2), var(--accent));
  background-size: 300%;
  animation: heroShimmer 5s ease infinite;
  position: absolute;
  top: 2px; left: 2px;
  z-index: 1;
}
.hero-avatar-ring {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(from 0deg, var(--accent), var(--accent2), #ff1744, var(--accent2), var(--accent));
  animation: logoRingSpin 3s linear infinite;
}

.hero-info { flex: 1; min-width: 0; }
.hero-name {
  font-family: 'Rajdhani', sans-serif;
  font-size: 20px; font-weight: 800;
  background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.hero-meta { font-size: 12px; color: var(--text2); margin-top: 2px; }
.hero-ver {
  padding: 3px 10px;
  background: rgba(230,57,70,0.12);
  border: 1px solid rgba(230,57,70,0.3);
  border-radius: 20px;
  font-size: 11px;
  color: var(--accent);
  font-weight: 700;
  white-space: nowrap;
  margin-top: 1px;
  display: inline-block;
}

/* Stats row */
.hero-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  border-top: 1px solid rgba(255,255,255,0.06);
}
.hero-stat {
  padding: 10px 4px;
  text-align: center;
  border-right: 1px solid rgba(255,255,255,0.06);
}
.hero-stat:last-child { border-right: none; }
.hero-stat-val {
  font-family: 'Rajdhani', sans-serif;
  font-size: 20px; font-weight: 800;
  line-height: 1;
}
.hero-stat-lbl { font-size: 10px; color: var(--text3); margin-top: 3px; text-transform: uppercase; letter-spacing: 0.3px; }
.col-red  { color: var(--accent); }
.col-green{ color: var(--green); }
.col-blue { color: var(--cyan); }
.col-gold { color: var(--gold); }

/* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
.toast-wrap { position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); z-index: 999; display: flex; flex-direction: column; gap: 6px; align-items: center; pointer-events: none; }
.toast {
  background: var(--bg3);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 22px;
  padding: 9px 18px;
  font-size: 13px;
  font-weight: 600;
  display: flex; align-items: center; gap: 7px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
  white-space: nowrap;
}
.toast.t-ok  { border-color: rgba(34,197,94,0.35); color: var(--green); }
.toast.t-err { border-color: rgba(230,57,70,0.35); color: var(--accent); }
.toast.t-inf { border-color: rgba(0,229,255,0.3); color: var(--cyan); }
@keyframes toastIn  { from { opacity:0; transform: translateY(12px); } to { opacity:1; transform:translateY(0); } }
@keyframes toastOut { from { opacity:1; } to { opacity:0; } }

/* ‚îÄ‚îÄ Modal ‚îÄ‚îÄ */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 200; align-items: flex-end; justify-content: center; backdrop-filter: blur(6px); }
.modal-overlay.open { display: flex; }
.modal {
  background: var(--bg2);
  border: 1px solid rgba(230,57,70,0.2);
  border-radius: var(--radius) var(--radius) 0 0;
  padding: 20px 20px 32px;
  width: 100%;
  max-width: 480px;
  animation: modalUp 0.3s cubic-bezier(0.4,0,0.2,1);
  position: relative;
}
.modal::before {
  content: '';
  position: absolute;
  top: 0; left: 50%; transform: translateX(-50%);
  width: 32px; height: 3px;
  border-radius: 2px;
  background: rgba(255,255,255,0.15);
  margin-top: 8px;
}
@keyframes modalUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
.modal h3 {
  font-family: 'Rajdhani', sans-serif;
  font-size: 18px; font-weight: 700;
  margin-bottom: 18px;
  padding-top: 8px;
  background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.modal-actions { display: flex; gap: 8px; margin-top: 18px; }
.modal-actions .btn { flex: 1; height: 42px; }

/* Form */
.form-group { display: flex; flex-direction: column; gap: 5px; margin-bottom: 13px; }
.form-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text3); }
.form-input {
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(230,57,70,0.2);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  color: var(--text);
  font-size: 14px;
  font-family: 'Inter', sans-serif;
  outline: none;
  transition: border-color 0.2s;
}
.form-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(230,57,70,0.1); }
.form-input::placeholder { color: var(--text3); }
select.form-input option { background: var(--bg2); }

/* ‚îÄ‚îÄ Divider ‚îÄ‚îÄ */
.divider { height: 1px; background: rgba(255,255,255,0.06); margin: 12px 0; }

/* ‚îÄ‚îÄ Spinner ‚îÄ‚îÄ */
.spinner {
  width: 20px; height: 20px;
  border: 2px solid rgba(255,255,255,0.1);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
  display: inline-block;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Loading state */
.loading-state { display: flex; flex-direction: column; align-items: center; padding: 30px; gap: 10px; }
.loading-state .spinner { width: 28px; height: 28px; }
.loading-text { font-size: 12px; color: var(--text3); }

/* ‚îÄ‚îÄ Config key-value ‚îÄ‚îÄ */
.cfg-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  gap: 10px;
}
.cfg-row:last-child { border-bottom: none; }
.cfg-key { font-size: 12px; color: var(--text2); flex: 1; }
.cfg-val { font-size: 12px; font-family: 'Courier New', monospace; color: var(--text); background: rgba(255,255,255,0.05); padding: 2px 8px; border-radius: 4px; max-width: 55%; text-align: right; word-break: break-all; }

/* Scrollbar */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(230,57,70,0.3); border-radius: 2px; }

/* ‚îÄ‚îÄ Connection error banner ‚îÄ‚îÄ */
.error-banner {
  background: rgba(230,57,70,0.1);
  border: 1px solid rgba(230,57,70,0.3);
  border-radius: var(--radius);
  padding: 16px;
  text-align: center;
  margin-bottom: 14px;
}
.error-banner-icon { font-size: 32px; margin-bottom: 8px; }
.error-banner-text { font-size: 13px; color: var(--text2); margin-bottom: 12px; line-height: 1.5; }

/* Add bot fab */
.fab {
  position: fixed;
  bottom: 90px;
  right: 16px;
  width: 52px; height: 52px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff;
  font-size: 24px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  border: none;
  box-shadow: 0 4px 20px rgba(230,57,70,0.5), 0 0 0 3px rgba(230,57,70,0.15);
  z-index: 50;
  transition: var(--transition);
  animation: fabPulse 3s ease infinite;
  -webkit-tap-highlight-color: transparent;
}
@keyframes fabPulse {
  0%,100% { box-shadow: 0 4px 20px rgba(230,57,70,0.5), 0 0 0 3px rgba(230,57,70,0.15); }
  50%     { box-shadow: 0 4px 30px rgba(230,57,70,0.7), 0 0 0 6px rgba(230,57,70,0.1); }
}
.fab:active { transform: scale(0.9); }

/* ‚îÄ‚îÄ About page ‚îÄ‚îÄ */
.about-hero {
  text-align: center;
  padding: 30px 20px 24px;
}
.about-logo-big {
  width: 80px; height: 80px;
  margin: 0 auto 16px;
  position: relative;
}
.about-logo-ring {
  position: absolute;
  inset: 0;
  border-radius: 24px;
  background: conic-gradient(from 0deg, var(--accent), var(--accent2), #ff1744, var(--accent2), var(--accent));
  animation: logoRingSpin 3s linear infinite;
}
.about-logo-ring::after {
  content: '';
  position: absolute;
  inset: 3px;
  border-radius: 21px;
  background: var(--bg2);
}
.about-logo-inner {
  position: absolute;
  inset: 3px;
  border-radius: 21px;
  background: linear-gradient(135deg, var(--bg2), var(--bg3));
  display: flex; align-items: center; justify-content: center;
  font-size: 40px;
  z-index: 1;
}
.about-title {
  font-family: 'Rajdhani', sans-serif;
  font-size: 28px; font-weight: 800;
  background: linear-gradient(135deg, #fff 0%, var(--accent) 50%, var(--accent2) 100%);
  background-size: 200%;
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  animation: heroShimmer 4s ease infinite;
  margin-bottom: 6px;
}
.about-sub { font-size: 13px; color: var(--text2); margin-bottom: 20px; }
.about-links { display: flex; gap: 10px; justify-content: center; }

</style>
</head>
<body>

<div class="bg-orbs">
  <div class="bg-orb bg-orb-1"></div>
  <div class="bg-orb bg-orb-2"></div>
  <div class="bg-orb bg-orb-3"></div>
  <div class="bg-orb bg-orb-4"></div>
</div>

<div id="app">

  <!-- ‚ïê‚ïê HEADER ‚ïê‚ïê -->
  <header class="header">
    <div class="header-top">

      <!-- –õ–æ–≥–æ—Ç–∏–ø —Å –ø–µ—Ä–µ–ª–∏–≤–æ–º -->
      <div class="logo">
        <div class="logo-icon-wrap">
          <div class="logo-ring"></div>
          <div class="logo-icon">ü¶à</div>
        </div>
        <div>
          <div class="logo-text">SHARK¬∑FARM</div>
          <div class="logo-sub">Steam Farmer</div>
        </div>
      </div>

      <div id="hdrStatus" class="status-chip" onclick="showPage('settings')">
        <div class="status-dot"></div>
        <span id="hdrStatusText">Connecting</span>
      </div>
    </div>

    <!-- Nav Tabs -->
    <div class="nav-tabs">
      <button class="nav-tab active" id="nav-dash" onclick="showPage('dash')">
        <span class="tab-icon">üìä</span>Dashboard
      </button>
      <button class="nav-tab" id="nav-bots" onclick="showPage('bots')">
        <span class="tab-icon">ü§ñ</span>–ë–æ—Ç—ã
      </button>
      <button class="nav-tab" id="nav-cmd" onclick="showPage('cmd')">
        <span class="tab-icon">‚å®Ô∏è</span>–ö–æ–º–∞–Ω–¥—ã
      </button>
      <button class="nav-tab" id="nav-logs" onclick="showPage('logs')">
        <span class="tab-icon">üìã</span>–õ–æ–≥–∏
      </button>
      <button class="nav-tab" id="nav-settings" onclick="showPage('settings')">
        <span class="tab-icon">‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
      </button>
    </div>
  </header>

  <!-- ‚ïê‚ïê DASHBOARD ‚ïê‚ïê -->
  <div class="page active" id="page-dash">

    <!-- Profile Hero -->
    <div class="profile-hero">
      <div class="hero-avatar">
        <div class="hero-avatar-ring"></div>
        <div class="hero-avatar-inner">ü¶à</div>
      </div>
      <div class="hero-info">
        <div class="hero-name">SharkFarm</div>
        <div class="hero-meta">Steam Card Farmer</div>
        <div class="hero-ver" id="sfVersion">v6.3.2.3</div>
      </div>
    </div>

    <!-- Hero stats -->
    <div class="card" style="margin-bottom:14px;">
      <div class="hero-stats">
        <div class="hero-stat">
          <div class="hero-stat-val col-green" id="ds-active">‚Äî</div>
          <div class="hero-stat-lbl">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
        </div>
        <div class="hero-stat">
          <div class="hero-stat-val col-blue" id="ds-farming">‚Äî</div>
          <div class="hero-stat-lbl">–§–∞—Ä–º—è—Ç</div>
        </div>
        <div class="hero-stat">
          <div class="hero-stat-val col-gold" id="ds-total">‚Äî</div>
          <div class="hero-stat-lbl">–í—Å–µ–≥–æ</div>
        </div>
      </div>
    </div>

    <!-- Stat grid -->
    <div class="stats-grid">
      <div class="stat-card s-red">
        <div class="stat-label">–ë–æ—Ç–æ–≤ –æ–Ω–ª–∞–π–Ω</div>
        <div class="stat-val" id="st-online">‚Äî</div>
        <div class="stat-sub">–∏–∑ <span id="st-total2">‚Äî</span></div>
      </div>
      <div class="stat-card s-green">
        <div class="stat-label">–ö–∞—Ä—Ç–æ—á–µ–∫</div>
        <div class="stat-val" id="st-cards">‚Äî</div>
        <div class="stat-sub">–≤ –æ—á–µ—Ä–µ–¥–∏</div>
      </div>
      <div class="stat-card s-blue">
        <div class="stat-label">–í–µ—Ä—Å–∏—è</div>
        <div class="stat-val" id="st-ver" style="font-size:18px;padding-top:4px;">‚Äî</div>
        <div class="stat-sub">SharkFarm</div>
      </div>
      <div class="stat-card s-gold">
        <div class="stat-label">–ê–ø—Ç–∞–π–º</div>
        <div class="stat-val" id="st-uptime" style="font-size:20px;padding-top:4px;">‚Äî</div>
        <div class="stat-sub">—Å –∑–∞–ø—É—Å–∫–∞ UI</div>
      </div>
    </div>

    <!-- Mini bot list -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">ü§ñ –ë–æ—Ç—ã</div>
        <button class="btn btn-ghost" onclick="showPage('bots')">–í—Å–µ ‚Üí</button>
      </div>
      <div id="dashBotList" style="padding:0 0 2px;">
        <div class="loading-state"><div class="spinner"></div><div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div></div>
      </div>
    </div>

    <!-- Mini log -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏</div>
        <button class="btn btn-ghost" onclick="showPage('logs')">–ü–æ–ª–Ω—ã–π ‚Üí</button>
      </div>
      <div class="card-body" style="padding:10px;">
        <div class="log-area" id="dashLog" style="height:180px;">
          <div class="log-line"><span class="log-info">[SF]</span> –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è‚Ä¶</div>
        </div>
      </div>
    </div>

  </div>

  <!-- ‚ïê‚ïê BOTS PAGE ‚ïê‚ïê -->
  <div class="page" id="page-bots">
    <div class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏</div>
    <div class="section-sub">–ó–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</div>

    <div style="display:flex;gap:8px;margin-bottom:14px;">
      <button class="btn btn-primary" style="flex:1;" onclick="startAllBots()">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ—Ö</button>
      <button class="btn btn-danger" style="flex:1;" onclick="stopAllBots()">‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
    </div>

    <div class="bots-list" id="fullBotList">
      <div class="loading-state"><div class="spinner"></div><div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –±–æ—Ç–æ–≤‚Ä¶</div></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê COMMAND PAGE ‚ïê‚ïê -->
  <div class="page" id="page-cmd">
    <div class="section-title">–ö–æ–º–∞–Ω–¥–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å</div>
    <div class="section-sub">–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ SharkFarm</div>

    <div class="card" style="margin-bottom:12px;">
      <div class="card-body">
        <div class="form-group" style="margin-bottom:10px;">
          <div class="form-label">–¶–µ–ª–µ–≤–æ–π –±–æ—Ç</div>
          <select class="form-input" id="cmdBotSel">
            <option value="">‚Äî ASF (–≤—Å–µ –±–æ—Ç—ã) ‚Äî</option>
          </select>
        </div>
        <div class="cmd-bar">
          <input class="cmd-input" type="text" id="cmdInput" placeholder="status, farm, 2fa..." onkeydown="if(event.key==='Enter')sendCmd()">
          <button class="btn btn-primary" style="padding:0 16px;height:42px;" onclick="sendCmd()">‚Üµ</button>
        </div>
        <div class="cmd-pills">
          <div class="cmd-pill" onclick="setCmd('status')">status</div>
          <div class="cmd-pill" onclick="setCmd('farm')">farm</div>
          <div class="cmd-pill" onclick="setCmd('stop')">stop</div>
          <div class="cmd-pill" onclick="setCmd('restart')">restart</div>
          <div class="cmd-pill" onclick="setCmd('2fa')">2fa</div>
          <div class="cmd-pill" onclick="setCmd('loot')">loot</div>
          <div class="cmd-pill" onclick="setCmd('exit')">exit</div>
          <div class="cmd-pill" onclick="setCmd('redeem')">redeem</div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">‚å®Ô∏è –í—ã–≤–æ–¥</div>
        <button class="btn btn-ghost" onclick="document.getElementById('cmdOut').innerHTML=''">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
      <div class="card-body" style="padding:10px;">
        <div class="log-area" id="cmdOut" style="height:320px;">
          <div class="log-line"><span class="log-ok">[SF]</span> –ö–æ–Ω—Å–æ–ª—å –≥–æ—Ç–æ–≤–∞. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê LOGS PAGE ‚ïê‚ïê -->
  <div class="page" id="page-logs">
    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:14px;">
      <div>
        <div class="section-title">–õ–æ–≥–∏</div>
        <div class="section-sub">–ñ—É—Ä–Ω–∞–ª SharkFarm</div>
      </div>
      <button class="btn btn-ghost" onclick="clearLog()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>
    <div class="card">
      <div class="card-body" style="padding:10px;">
        <div class="log-area" id="fullLog" style="height:520px;"></div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê SETTINGS PAGE ‚ïê‚ïê -->
  <div class="page" id="page-settings">
    <div class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
    <div class="section-sub">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SharkFarm API</div>

    <div class="card">
      <div class="card-header"><div class="card-title">üîå API –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div></div>
      <div class="card-body">
        <div class="form-group">
          <div class="form-label">–•–æ—Å—Ç</div>
          <input class="form-input" id="sHost" value="localhost">
        </div>
        <div class="form-group">
          <div class="form-label">–ü–æ—Ä—Ç</div>
          <input class="form-input" id="sPort" type="number" value="1242">
        </div>
        <div class="form-group">
          <div class="form-label">–ü–∞—Ä–æ–ª—å (IPCPassword)</div>
          <input class="form-input" id="sPass" type="password" placeholder="–û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω">
        </div>
        <button class="btn btn-primary" style="width:100%;height:44px;margin-top:4px;" onclick="saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å</button>
      </div>
    </div>

    <div class="card">
      <div class="card-header"><div class="card-title">ü¶à –û –ø—Ä–æ–≥—Ä–∞–º–º–µ</div></div>
      <div class="about-hero">
        <div class="about-logo-big">
          <div class="about-logo-ring"></div>
          <div class="about-logo-inner">ü¶à</div>
        </div>
        <div class="about-title">SharkFarm</div>
        <div class="about-sub">v6.3.2.3 ¬∑ –ù–∞ –æ—Å–Ω–æ–≤–µ ArchiSteamFarm<br>–¢—ë–º–Ω—ã–π —Å—Ç–∏–ª—å ¬∑ –ö—Ä–∞—Å–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç</div>
        <div class="about-links">
          <button class="btn btn-danger" onclick="confirmShutdown()">‚èª Shutdown</button>
          <button class="btn btn-ghost" onclick="window.open('https://github.com/SharkFarmNET/SharkFarm','_blank')">GitHub</button>
        </div>
      </div>
    </div>
  </div>

</div><!-- /app -->

<!-- ‚ïê‚ïê FAB ‚ïê‚ïê -->
<button class="fab" id="fab" onclick="openAddBot()" title="–î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞">+</button>

<!-- ‚ïê‚ïê MODALS ‚ïê‚ïê -->
<div class="modal-overlay" id="modalAddBot" onclick="if(event.target===this)closeModal('modalAddBot')">
  <div class="modal">
    <h3>ü§ñ –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞</h3>
    <div class="form-group">
      <div class="form-label">–ò–º—è –±–æ—Ç–∞</div>
      <input class="form-input" id="nb-name" placeholder="MyBot">
    </div>
    <div class="form-group">
      <div class="form-label">Steam –ª–æ–≥–∏–Ω</div>
      <input class="form-input" id="nb-login" placeholder="steam_username">
    </div>
    <div class="form-group">
      <div class="form-label">–ü–∞—Ä–æ–ª—å</div>
      <input class="form-input" id="nb-pass" type="password">
    </div>
    <div class="form-group">
      <div class="form-label">–ê–∫—Ç–∏–≤–µ–Ω</div>
      <select class="form-input" id="nb-en">
        <option value="true">–î–∞</option>
        <option value="false">–ù–µ—Ç</option>
      </select>
    </div>
    <div class="modal-actions">
      <button class="btn btn-ghost" onclick="closeModal('modalAddBot')">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn btn-primary" onclick="addBot()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modalShutdown" onclick="if(event.target===this)closeModal('modalShutdown')">
  <div class="modal">
    <h3>‚èª –í—ã–∫–ª—é—á–∏—Ç—å SharkFarm?</h3>
    <p style="font-size:13px;color:var(--text2);margin-bottom:4px;">–í—Å–µ –±–æ—Ç—ã –±—É–¥—É—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?</p>
    <div class="modal-actions">
      <button class="btn btn-ghost" onclick="closeModal('modalShutdown')">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn btn-danger" onclick="doShutdown()">–í—ã–∫–ª—é—á–∏—Ç—å</button>
    </div>
  </div>
</div>

<div class="toast-wrap" id="toastWrap"></div>

<script>
// ‚ïê‚ïê Config ‚ïê‚ïê
let API_HOST = localStorage.getItem('sf_host') || 'localhost';
let API_PORT = localStorage.getItem('sf_port') || '1242';
let API_PASS = localStorage.getItem('sf_pass') || '';
let BASE = () => `http://${API_HOST}:${API_PORT}/Api`;
let startTs = Date.now();
let botsCache = {};
let connected = false;

// ‚ïê‚ïê Navigation ‚ïê‚ïê
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('page-' + id)?.classList.add('active');
  document.getElementById('nav-' + id)?.classList.add('active');
  // Show/hide FAB only on bots page
  document.getElementById('fab').style.display = id === 'bots' ? 'flex' : 'none';
  if (id === 'settings') fillSettings();
  if (id === 'logs') scrollLog();
}

// ‚ïê‚ïê API ‚ïê‚ïê
async function api(path, method = 'GET', body = null) {
  const h = { 'Content-Type': 'application/json' };
  if (API_PASS) h['Authentication'] = API_PASS;
  const opts = { method, headers: h };
  if (body) opts.body = JSON.stringify(body);
  const res = await fetch(BASE() + path, opts);
  if (!res.ok) throw new Error('HTTP ' + res.status);
  return res.json();
}

// ‚ïê‚ïê Connection status ‚ïê‚ïê
function setConnected(ok) {
  connected = ok;
  const chip = document.getElementById('hdrStatus');
  const txt  = document.getElementById('hdrStatusText');
  const dot  = chip.querySelector('.status-dot');
  if (ok) {
    chip.style.background = 'rgba(34,197,94,0.1)';
    chip.style.borderColor = 'rgba(34,197,94,0.3)';
    chip.style.color = 'var(--green)';
    dot.style.background = 'var(--green)';
    dot.style.boxShadow = '0 0 8px var(--green)';
    txt.textContent = 'Online';
  } else {
    chip.style.background = 'rgba(230,57,70,0.1)';
    chip.style.borderColor = 'rgba(230,57,70,0.3)';
    chip.style.color = 'var(--accent)';
    dot.style.background = 'var(--accent)';
    dot.style.boxShadow = '0 0 8px var(--accent)';
    txt.textContent = 'Offline';
  }
}

// ‚ïê‚ïê Bots ‚ïê‚ïê
function botClass(bot) {
  if (!bot.KeepRunning) return 'bc-offline';
  if ((bot.CardsFarmer?.CurrentGamesFarming?.length || 0) > 0) return 'bc-farming';
  if (bot.IsConnectedAndLoggedOn) return 'bc-online';
  return 'bc-idle';
}
function botStatusLabel(bot) {
  const c = botClass(bot);
  return { 'bc-online':'üü¢ –û–Ω–ª–∞–π–Ω','bc-farming':'üéÆ –§–∞—Ä–º–∏—Ç','bc-idle':'üü° –û–∂–∏–¥–∞–Ω–∏–µ','bc-offline':'‚ö´ –û—Ñ—Ñ–ª–∞–π–Ω' }[c];
}

function renderMiniBot(name, bot) {
  const bc = botClass(bot);
  const games = bot.CardsFarmer?.CurrentGamesFarming || [];
  const detail = games.length ? '–§–∞—Ä–º–∏—Ç: ' + games.map(g=>g.GameName||g.AppID).join(', ')
                              : (bot.IsConnectedAndLoggedOn ? bot.AccountName || name : '–ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω');
  return `<div class="bot-card ${bc}" style="margin:0 12px 8px;" onclick="showPage('bots')">
    <div class="bot-body">
      <div class="bot-avatar">
        <div class="bot-avatar-ring"></div>
        <div class="bot-avatar-inner">ü¶à</div>
      </div>
      <div class="bot-info">
        <div class="bot-name">${esc(name)}</div>
        <div class="bot-detail">${esc(detail)}</div>
      </div>
      <div class="bot-status-badge">${botStatusLabel(bot)}</div>
    </div>
  </div>`;
}

function renderFullBot(name, bot) {
  const bc = botClass(bot);
  const games = bot.CardsFarmer?.CurrentGamesFarming || [];
  const detail = games.length ? '–§–∞—Ä–º–∏—Ç: ' + games.map(g=>g.GameName||g.AppID).join(', ')
                              : (bot.IsConnectedAndLoggedOn ? '–ü–æ–¥–∫–ª—é—á—ë–Ω: ' + (bot.AccountName||name) : '–ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω');
  const isFarming = bc === 'bc-farming';
  const remainCards = bot.CardsFarmer?.GamesToFarm?.reduce((a,g)=>a+(g.CardsRemaining||0),0) || 0;
  const totalCards = bot.CardsFarmer?.GamesToFarm?.length || 0;
  return `<div class="bot-card ${bc}">
    <div class="bot-body">
      <div class="bot-avatar">
        <div class="bot-avatar-ring"></div>
        <div class="bot-avatar-inner">ü¶à</div>
      </div>
      <div class="bot-info">
        <div class="bot-name">${esc(name)}</div>
        <div class="bot-detail">${esc(detail)}</div>
      </div>
      <div class="bot-status-badge">${botStatusLabel(bot)}</div>
    </div>
    ${isFarming && remainCards > 0 ? `
    <div class="bot-progress">
      <div class="bot-progress-label">
        <span>${remainCards} –∫–∞—Ä—Ç–æ—á–µ–∫ ¬∑ ${totalCards} –∏–≥—Ä</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill" style="width:${Math.min(95,Math.max(5, 100 - remainCards/Math.max(remainCards,1)*100))}%"></div>
      </div>
    </div>` : ''}
    <div class="bot-actions">
      <button class="btn-bot-action btn-start" onclick="resumeBot('${esc(name)}')">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
      <button class="btn-bot-action btn-stop" onclick="pauseBot('${esc(name)}')">‚è∏ –ü–∞—É–∑–∞</button>
      <button class="btn-bot-action btn-delete" onclick="deleteBot('${esc(name)}')">üóë</button>
    </div>
  </div>`;
}

async function loadBots() {
  try {
    const res = await api('/Bot/ASF');
    if (!res?.Result) { setConnected(false); return; }
    setConnected(true);
    botsCache = res.Result;
    const names = Object.keys(botsCache);

    const active = names.filter(n => botsCache[n].IsConnectedAndLoggedOn).length;
    const farming = names.filter(n => (botsCache[n].CardsFarmer?.CurrentGamesFarming?.length||0)>0).length;

    document.getElementById('ds-active').textContent = active;
    document.getElementById('ds-farming').textContent = farming;
    document.getElementById('ds-total').textContent = names.length;
    document.getElementById('st-online').textContent = active;
    document.getElementById('st-total2').textContent = names.length;
    const cards = names.reduce((a,n)=>a+(botsCache[n].CardsFarmer?.GamesToFarm?.reduce((b,g)=>b+(g.CardsRemaining||0),0)||0),0);
    document.getElementById('st-cards').textContent = cards || '‚Äî';

    // Bot count badge on nav tab
    document.getElementById('nav-bots').querySelector('.tab-icon').textContent = names.length > 0 ? `ü§ñ${names.length}` : 'ü§ñ';

    const noBots = `<div style="padding:20px;text-align:center;color:var(--text3);font-size:13px;">–ù–µ—Ç –±–æ—Ç–æ–≤. –ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å.</div>`;

    if (!names.length) {
      document.getElementById('dashBotList').innerHTML = noBots;
      document.getElementById('fullBotList').innerHTML = noBots;
    } else {
      document.getElementById('dashBotList').innerHTML = '<div style="padding-top:4px;">' + names.slice(0,4).map(n=>renderMiniBot(n,botsCache[n])).join('') + '</div>';
      document.getElementById('fullBotList').innerHTML = names.map(n=>renderFullBot(n,botsCache[n])).join('');
    }

    // Fill bot select
    const sel = document.getElementById('cmdBotSel');
    sel.innerHTML = '<option value="">‚Äî ASF (–≤—Å–µ –±–æ—Ç—ã) ‚Äî</option>' + names.map(n=>`<option value="${esc(n)}">${esc(n)}</option>`).join('');

  } catch (e) {
    setConnected(false);
    const err = `<div class="error-banner" style="margin:12px;">
      <div class="error-banner-icon">‚ö°</div>
      <div class="error-banner-text">–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ SharkFarm.<br>–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ ${API_HOST}:${API_PORT}</div>
      <button class="btn btn-ghost" onclick="showPage('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>`;
    document.getElementById('dashBotList').innerHTML = err;
    document.getElementById('fullBotList').innerHTML = err;
  }
}

async function loadVersion() {
  try {
    const res = await api('/ASF');
    const v = res?.Result?.Version;
    if (v) {
      document.getElementById('sfVersion').textContent = 'v' + v;
      document.getElementById('st-ver').textContent = 'v' + v;
    }
  } catch {}
}

// ‚ïê‚ïê Bot Actions ‚ïê‚ïê
async function resumeBot(name) {
  try { await api(`/Bot/${name}/Resume`,'POST'); toast('‚ñ∂ '+name+' –∑–∞–ø—É—â–µ–Ω','t-ok'); setTimeout(loadBots,1200); }
  catch { toast('–û—à–∏–±–∫–∞','t-err'); }
}
async function pauseBot(name) {
  try { await api(`/Bot/${name}/Pause`,'POST',{Permanent:false}); toast('‚è∏ '+name+' –Ω–∞ –ø–∞—É–∑–µ','t-ok'); setTimeout(loadBots,1200); }
  catch { toast('–û—à–∏–±–∫–∞','t-err'); }
}
async function deleteBot(name) {
  if (!confirm(`–£–¥–∞–ª–∏—Ç—å –±–æ—Ç–∞ "${name}"?`)) return;
  try { await api(`/Bot/${name}`,'DELETE'); toast('üóë '+name+' —É–¥–∞–ª—ë–Ω','t-inf'); setTimeout(loadBots,1200); }
  catch { toast('–û—à–∏–±–∫–∞','t-err'); }
}
async function startAllBots() {
  for (const n of Object.keys(botsCache)) { try { await api(`/Bot/${n}/Resume`,'POST'); } catch {} }
  toast('‚ñ∂ –í—Å–µ –±–æ—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã','t-ok'); setTimeout(loadBots,2000);
}
async function stopAllBots() {
  for (const n of Object.keys(botsCache)) { try { await api(`/Bot/${n}/Pause`,'POST',{Permanent:false}); } catch {} }
  toast('‚èπ –í—Å–µ –±–æ—Ç—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã','t-inf'); setTimeout(loadBots,2000);
}

// ‚ïê‚ïê Add Bot ‚ïê‚ïê
function openAddBot() { document.getElementById('modalAddBot').classList.add('open'); }
async function addBot() {
  const name  = document.getElementById('nb-name').value.trim();
  const login = document.getElementById('nb-login').value.trim();
  const pass  = document.getElementById('nb-pass').value;
  const en    = document.getElementById('nb-en').value === 'true';
  if (!name || !login) { toast('–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è','t-err'); return; }
  try {
    await api(`/Bot/${name}`,'POST',{SteamLogin:login,SteamPassword:pass,Enabled:en});
    toast('‚úÖ –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω','t-ok'); closeModal('modalAddBot'); setTimeout(loadBots,1200);
  } catch { toast('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è','t-err'); }
}

// ‚ïê‚ïê Command ‚ïê‚ïê
function setCmd(c) { document.getElementById('cmdInput').value = c; document.getElementById('cmdInput').focus(); }
async function sendCmd() {
  const bot = document.getElementById('cmdBotSel').value;
  const cmd = document.getElementById('cmdInput').value.trim();
  if (!cmd) return;
  const out = document.getElementById('cmdOut');
  const ts = new Date().toLocaleTimeString();
  out.innerHTML += `<div class="log-line"><span class="log-time">${ts}</span> <span class="log-warn">[YOU‚Üí${bot||'SF'}]</span> ${esc(cmd)}</div>`;
  document.getElementById('cmdInput').value = '';
  try {
    const ep = bot ? `/Bot/${bot}/Command` : '/Command';
    const res = await api(ep,'POST',{Command:cmd});
    const reply = esc(String(res?.Result ?? res?.Message ?? 'OK'));
    out.innerHTML += `<div class="log-line"><span class="log-time">${ts}</span> <span class="log-ok">[SF]</span> ${reply}</div>`;
  } catch {
    out.innerHTML += `<div class="log-line"><span class="log-time">${ts}</span> <span class="log-err">[ERR]</span> –ù–µ—Ç —Å–≤—è–∑–∏</div>`;
  }
  out.scrollTop = out.scrollHeight;
}

// ‚ïê‚ïê Logs ‚ïê‚ïê
async function loadLog() {
  try {
    const res = await api('/NLog');
    const lines = (res?.Result || []).slice(-150);
    const html = lines.map(l => {
      const t = esc(String(l));
      let cls = 'log-info';
      if (/error|exception|fail/i.test(t)) cls='log-err';
      else if (/warn/i.test(t)) cls='log-warn';
      else if (/success|card|add|redeem/i.test(t)) cls='log-ok';
      return `<div class="log-line"><span class="${cls}">${t}</span></div>`;
    }).join('') || '<div class="log-line" style="color:var(--text3);">–ù–µ—Ç –ª–æ–≥–æ–≤.</div>';
    document.getElementById('fullLog').innerHTML = html;
    document.getElementById('dashLog').innerHTML = lines.slice(-30).map(l=>{
      const t=esc(String(l));
      let cls='log-info';
      if(/error|exception|fail/i.test(t)) cls='log-err';
      else if(/warn/i.test(t)) cls='log-warn';
      else if(/success|card|add|redeem/i.test(t)) cls='log-ok';
      return `<div class="log-line"><span class="${cls}">${t}</span></div>`;
    }).join('');
    scrollLog();
  } catch {}
}
function clearLog() { document.getElementById('fullLog').innerHTML=''; document.getElementById('dashLog').innerHTML=''; }
function scrollLog() { const f=document.getElementById('fullLog'); f.scrollTop=f.scrollHeight; const d=document.getElementById('dashLog'); d.scrollTop=d.scrollHeight; }

// ‚ïê‚ïê Settings ‚ïê‚ïê
function fillSettings() {
  document.getElementById('sHost').value = API_HOST;
  document.getElementById('sPort').value = API_PORT;
  document.getElementById('sPass').value = API_PASS;
}
function saveSettings() {
  API_HOST = document.getElementById('sHost').value.trim() || 'localhost';
  API_PORT = document.getElementById('sPort').value.trim() || '1242';
  API_PASS = document.getElementById('sPass').value;
  localStorage.setItem('sf_host', API_HOST);
  localStorage.setItem('sf_port', API_PORT);
  localStorage.setItem('sf_pass', API_PASS);
  toast('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ','t-ok');
  refreshAll();
}

// ‚ïê‚ïê Shutdown ‚ïê‚ïê
function confirmShutdown() { document.getElementById('modalShutdown').classList.add('open'); }
async function doShutdown() {
  closeModal('modalShutdown');
  try { await api('/ASF/Exit','POST'); toast('–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã‚Ä¶','t-inf'); }
  catch {}
}

// ‚ïê‚ïê Uptime ‚ïê‚ïê
function updateUptime() {
  const s = Math.floor((Date.now()-startTs)/1000);
  const h = Math.floor(s/3600);
  const m = Math.floor((s%3600)/60);
  document.getElementById('st-uptime').textContent = h>0 ? `${h}—á ${m}–º` : `${m}–º`;
}

// ‚ïê‚ïê Utils ‚ïê‚ïê
function esc(t) { return String(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function closeModal(id) { document.getElementById(id).classList.remove('open'); }

function toast(msg, cls='t-ok') {
  const w = document.getElementById('toastWrap');
  const el = document.createElement('div');
  el.className = 'toast '+cls;
  el.textContent = msg;
  w.appendChild(el);
  setTimeout(()=>el.remove(), 3000);
}

// ‚ïê‚ïê Refresh ‚ïê‚ïê
async function refreshAll() {
  await loadBots();
  await loadVersion();
  await loadLog();
}

// ‚ïê‚ïê Init ‚ïê‚ïê
document.getElementById('fab').style.display = 'none'; // only on bots page

refreshAll();
setInterval(refreshAll, 10000);
setInterval(updateUptime, 1000);
</script>
</body>
</html>
